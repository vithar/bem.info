<!DOCTYPE html><html class="ua_js_no"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>enb-stylus / ENB / Toolbox / БЭМ</title><script>(function(e,c){e[c]=e[c].replace(/(ua_js_)no/g,"$1yes");})(document.documentElement,"className");</script><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,600,700&amp;subset=cyrillic"/><link rel="stylesheet" href="/bem.info/ru/toolbox.min.css"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/><meta property="og:image" content="https://ru.bem.info/og_image/logo_theme_stripe.png"/><meta property="og:url" content="/toolbox/enb/enb-stylus/"/><meta property="og:type" content="article"/><meta property="og:description" content="enb-stylus"/><meta property="og:keywords" content="toolbox, enb, enb-stylus"/><link rel="shortcut icon" href="/bem.info/ru/favicon.ico"/></head><body class="page"><div class="header i-bem" data-bem='{"header":{}}'><div class="header__layout"><a class="logo header__logo" href="/bem.info/ru/"><svg class="logo__logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 101.7 84"><path d="M0 13h23.8v7H0zM0 0h23.8v7H0zm42.7 25.9H0v7h41.1c4.5 0 15 .1 18.9 6.4v-3.9c-1.9-6.2-7.5-9.5-17.3-9.5zm.1 13H0v7h41.1c10 0 16.3.4 18.9 1.8v-3.1c-2-4.9-10.4-5.7-17.2-5.7zm-.1 33H0v-7h41.1c4.5 0 15-.1 18.9-6.4v3.9c-1.9 6.2-7.5 9.5-17.3 9.5zm.1-13H0v-7h41.1c10 0 16.3-.4 18.9-1.8v3.1c-2 4.9-10.4 5.7-17.2 5.7zM70.4 84h31.4v-4.3H71.3c-2.7 0-9.1-.1-11.4-3.8v2.4C61 82 64.4 84 70.4 84zm-.1-7.9h31.4v-4.3H71.3c-6.1 0-9.9-.2-11.4-1.1v1.9c1.2 3 6.3 3.5 10.4 3.5z"/></svg></a><ul class="lang-switcher header__lang"><li class="lang-switcher__item"><a class="lang-switcher__link" href="/bem.info/en/toolbox/enb/enb-stylus/">en</a></li><li class="lang-switcher__item"><span class="lang-switcher__current">ru</span></li></ul><a class="header__forum" href="/bem.info/ru/forum/">Форум</a></div><div class="search header__search i-bem" data-bem='{"search":{}}'><form class="form search__form search__form_site_toolbox i-bem" data-bem='{"form":{}}' action="https://yandex.ru/sitesearch"><span class="input input_type_search i-bem" data-bem='{"input":{}}'><span class="input__box"><input class="input__control" name="text" placeholder="Искать" autocomplete="off" type="search"/></span></span><input type="hidden" name="reqenc"/><input type="hidden" name="searchid" value="1944806"/><input type="hidden" name="l10n" value="ru"/><div class="search-icon search__submit"><svg viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg"><circle cx="7" cy="7" r="6"/><path d="M11 11l5 5"/></svg></div></form></div><div class="header__menu"><ul class="breadcrumbs header__breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/bem.info/ru/toolbox/">Toolbox</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/bem.info/ru/toolbox/enb/">ENB</a></li><li class="breadcrumbs__item">enb-stylus</li></ul><ul class="nav"><li class="nav__item"><a class="nav__link" href="/bem.info/ru/toolbox/enb/enb-stylus/api/">API</a></li><li class="nav__item"><a class="nav__link" href="/bem.info/ru/toolbox/enb/enb-stylus/changelog/">Изменения</a></li></ul></div><div class="header__toggle search-icon"><span class="header__toggle-line"></span></div></div><div class="sitemap i-bem" data-bem='{"sitemap":{}}'><div class="sitemap__section"><h1 class="sitemap__title sitemap__title_site_methodology"><a class="sitemap__link" href="/bem.info/ru/methodology/">Методология</a></h1><ul class="sitemap__tree"><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/key-concepts/">Основные понятия</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/naming-convention/">Соглашение по именованию</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/js/">JavaScript</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/js-principles/">Особенности JavaScript</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/filesystem/">Файловая система</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/build/">Сборка</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/declarations/">Декларации</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/solved-problems/">Какие проблемы решает</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/history/">История создания</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/articles/">Статьи</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/methodology/faq/">FAQ</a></li></ul></div><div class="sitemap__section"><h1 class="sitemap__title sitemap__title_site_toolbox"><a class="sitemap__link" href="/bem.info/ru/toolbox/">Toolbox</a></h1><ul class="sitemap__tree"><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/">ENB</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-bem-techs/">enb-bem-techs</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-bem-techs/build-bundle/">Сборка бандла</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-bem-techs/build-page/">Сборка страницы</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-bem-techs/build-merged-bundle/">Сборка merged-бандла</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-bem-techs/build-dist/">Сборка дистрибутива</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-bem-techs/api/">API</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-bem-techs/changelog/">Изменения</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-bem-techs/migration-2/">Миграция на 2.0</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-bem-techs/migration-1/">Миграция на 1.0</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-js/">enb-js</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-js/api/">API</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-js/changelog/">Изменения</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-modules/">enb-modules</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-modules/changelog/">Изменения</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-css/">enb-css</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-css/ie/">Сборка бандла для IE</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-css/api/">API</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-css/changelog/">Изменения</a></li><li class="sitemap__tree-item-2"><strong class="sitemap__current">enb-stylus</strong></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-stylus/api/">API</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/toolbox/enb/enb-stylus/changelog/">Изменения</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/toolbox/bem-tools/">bem-tools</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/toolbox/sdk/">BEM SDK</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/toolbox/sdk/bem-naming/">bem-naming</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/toolbox/sdk/bem-config/">bem-config</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/toolbox/sdk/bem-fs-scheme/">bem-fs-scheme</a></li></ul></div><div class="sitemap__section"><h1 class="sitemap__title sitemap__title_site_platform"><a class="sitemap__link">Платформа</a></h1><ul class="sitemap__tree"><li class="sitemap__tree-item-1"><a class="sitemap__link">Технологии</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/technology/i-bem/v2/i-bem-js/">i-bem</a></li><li class="sitemap__tree-item-2"><a class="sitemap__link" href="/bem.info/ru/technology/deps/about/">DEPS</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/technology/bemjson/v2/bemjson/">BEMJSON</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/technology/bemhtml/v2/intro/">BEMHTML</a></li><li class="sitemap__tree-item-3"><a class="sitemap__link" href="/bem.info/ru/technology/bemtree/v2/bemtree/">BEMTREE</a></li><div class="sitemap__tree-item-0"><a class="sitemap__link" href="/bem.info/ru/libs/">Библиотеки</a></div><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/libs/bem-core/">bem-core</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/libs/bem-components/">bem-components</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/libs/bem-history/">bem-history</a></li></ul></div><div class="sitemap__section"><h1 class="sitemap__title sitemap__title_site_community"><a class="sitemap__link" href="/bem.info/ru/community/">Сообщество</a></h1><ul class="sitemap__tree"><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/blog/">Блог</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/events/">События</a></li><li class="sitemap__tree-item-1"><a class="sitemap__link" href="/bem.info/ru/forum/">Форум</a></li></ul></div></div><div class="article-wrap"><div class="article"><ul class="article-tags"><li class="article-tags__tag"><a class="article-tags__link" href="/bem.info/ru/tags/toolbox">toolbox</a></li><li class="article-tags__tag"><a class="article-tags__link" href="/bem.info/ru/tags/enb">enb</a></li><li class="article-tags__tag"><a class="article-tags__link" href="/bem.info/ru/tags/enb-stylus">enb-stylus</a></li></ul><h1 class="article__heading article__heading_1" id="enb-stylus"><a href="#enb-stylus" class="article__heading-anchor"></a>enb-stylus</h1><p><a href="http://www.npmjs.org/package/enb-stylus"><img src="/bem.info/ru/YU97lW4hnvbxJWozhFmfEjsElto.svg?style=flat" alt="NPM version"></a> <a href="https://travis-ci.org/enb/enb-stylus"><img src="/bem.info/ru/4JEFFq5xaBVy4o_O9o_D7qc2imU.svg?style=flat&amp;label=tests" alt="Build Status"></a> <a href="https://ci.appveyor.com/project/blond/enb-stylus"><img src="/bem.info/ru/MyNYykkmhA6UyGANWzBzB-TM3ZU.svg?style=flat&amp;label=windows" alt="Build status"></a> <a href="https://coveralls.io/r/enb/enb-stylus?branch=master"><img src="/bem.info/ru/OlDRE7b2SCmjytvYU7kS2BMNAUc.svg?style=flat" alt="Coverage Status"></a> <a href="https://david-dm.org/enb/enb-stylus"><img src="/bem.info/ru/89nHbKKqckp3-5xgyJtK_NU5wIQ.svg?style=flat" alt="Dependency Status"></a></p>
<p>Пакет предоставляет <a href="https://ru.bem.info/tools/bem/enb-bem/">ENB</a>-технологию для сборки CSS- и Stylus-файлов в проектах, построенных по <a href="https://ru.bem.info/method/">методологии БЭМ</a>.</p>
<p>Принципы работы технологии и ее API описаны в документе <a href="/toolbox/enb/enb-stylus/api/">API технологии</a>.</p>
<p><strong>Совместимость:</strong> технология пакета <code>enb-stylus</code> поддерживает версию <a href="https://github.com/stylus/stylus">CSS-препроцессора Stylus</a> <code>0.54.2</code>.</p>
<h2 class="article__heading article__heading_2" id="Обзор-документа-1"><a href="#Обзор-документа-1" class="article__heading-anchor"></a>Обзор документа</h2><ul>
<li><a href="#Работа-технологии-stylus">Работа технологии <code>stylus</code></a></li>
<li><a href="#Как-начать-использовать">Как начать использовать?</a></li>
<li><a href="#Особенности-работы-пакета">Особенности работы пакета</a><ul>
<li><a href="#Совместное-использование-stylus-и-css">Совместное использование Stylus и CSS</a></li>
<li><a href="#Добавление-вендорных-префиксов">Добавление вендорных префиксов</a></li>
<li><a href="#Минимизация-css-кода">Минимизация CSS-кода</a></li>
<li><a href="#Сборка-отдельного-бандла-для-ie">Сборка отдельного бандла для IE</a></li>
</ul>
</li>
</ul>
<h2 class="article__heading article__heading_2" id="Работа-технологии-codestyluscode"><a href="#Работа-технологии-codestyluscode" class="article__heading-anchor"></a>Работа технологии <code>stylus</code></h2><p>В <a href="https://ru.bem.info/method/filesystem/">БЭМ-методологии</a> стили к каждому блоку хранятся в отдельных файлах в директориях блоков.</p>
<p>ENB-технология <code>stylus</code> позволяет писать код как в синтаксисе Stylus, так и на чистом CSS. Для компиляции Stylus-кода в CSS используется CSS-препроцессор <a href="https://github.com/stylus/stylus">Stylus</a>.</p>
<p>В результате сборки вы получите CSS-файл. Для обработки итогового CSS используется CSS-построцессор <a href="https://github.com/postcss/postcss">postcss</a>.</p>
<h2 class="article__heading article__heading_2" id="Как-начать-использовать"><a href="#Как-начать-использовать" class="article__heading-anchor"></a>Как начать использовать?</h2><p><strong>1.</strong> Установите пакет <code>enb-stylus</code>:</p>
<pre><code class="lang-sh">$ npm install --save-dev enb-stylus
</code></pre>
<p><strong>Требования:</strong> зависимость от пакета <code>enb</code> версии <code>0.16.0</code> или выше.</p>
<p><strong>2.</strong> Опишите код стилей в файле с расширением <code>.styl</code>:</p>
<pre><code> <span class="hljs-keyword">blocks/
</span> └── <span class="hljs-keyword">block/
</span>     └── <span class="hljs-keyword">block.styl</span>
</code></pre><p><strong>3.</strong> Добавьте в конфигурационный файл <code>.enb/make.js</code> следующий код:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> stylusTech = <span class="hljs-built_in">require</span>(<span class="hljs-string">'enb-stylus/techs/stylus'</span>),
    FileProvideTech = <span class="hljs-built_in">require</span>(<span class="hljs-string">'enb/techs/file-provider'</span>),
    bemTechs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'enb-bem-techs'</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{
    config.node(<span class="hljs-string">'bundle'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>) </span>{
        <span class="hljs-comment">// Получаем список файлов (FileList)</span>
        node.addTechs([
            [FileProvideTech, { target: <span class="hljs-string">'?.bemdecl.js'</span> }],
            [bemTechs.levels, { levels: [<span class="hljs-string">'blocks'</span>] }],
            bemTechs.deps,
            bemTechs.files
        ]);

        <span class="hljs-comment">// Строим CSS-файл</span>
        node.addTech([stylusTech, {
            <span class="hljs-comment">// target: '?.css',</span>
            <span class="hljs-comment">// filesTarget: '?.files',</span>
            <span class="hljs-comment">// sourceSuffixes: ['.styl', '.css'],</span>
            <span class="hljs-comment">// url: 'rebase'</span>
            <span class="hljs-comment">// imports: 'include',</span>
            <span class="hljs-comment">// comments: true</span>
        }]);
        node.addTarget(<span class="hljs-string">'?.css'</span>);
    });
};
</code></pre>
<h2 class="article__heading article__heading_2" id="Особенности-работы-пакета-1"><a href="#Особенности-работы-пакета-1" class="article__heading-anchor"></a>Особенности работы пакета</h2><h3 class="article__heading article__heading_3" id="Совместное-использование-stylus-и-css"><a href="#Совместное-использование-stylus-и-css" class="article__heading-anchor"></a>Совместное использование Stylus и CSS</h3><p>В проекте допускается совместное использование <code>.css</code>- и <code>.styl</code>-файлов. Однако в рамках одного блока обе технологии не могут использоваться одновременно. Если стили блока реализованы и в CSS, и в Stylus, будет использоваться файл с расширением <code>.styl</code>.</p>
<p><strong>Пример 1.</strong> Если файл одного блока реализован в CSS-технологии, а файл другого — в Stylus:</p>
<pre><code><span class="hljs-keyword">blocks/
</span>└── <span class="hljs-keyword">block1/
</span>    └── <span class="hljs-keyword">block1.styl
</span>└── <span class="hljs-keyword">block2/
</span>    └── <span class="hljs-keyword">block2.css
</span><span class="hljs-keyword">bundle
</span>└── <span class="hljs-keyword">bundle.css</span>
</code></pre><p>В сборку попадут оба файла:</p>
<pre><code class="lang-css">@<span class="hljs-keyword">import</span> <span class="hljs-string">"../blocks/block1/block1.styl"</span>;
@<span class="hljs-keyword">import</span> <span class="hljs-string">"../blocks/block1/block2.css"</span>;
</code></pre>
<p><strong>Пример 2.</strong> Если у одного блока есть несколько реалиализаций: файл c расширением <code>.styl</code> и файл c расширением <code>.css</code>:</p>
<pre><code><span class="hljs-keyword">blocks/
</span>└── <span class="hljs-keyword">block/
</span>    ├── <span class="hljs-keyword">block.styl
</span>    └── <span class="hljs-keyword">block.css
</span><span class="hljs-keyword">bundle
</span>└── <span class="hljs-keyword">bundle.css</span>
</code></pre><p>В сборку попадет только Stylus-файл:</p>
<pre><code class="lang-css">@<span class="hljs-keyword">import</span> <span class="hljs-string">"../blocks/block/block.styl"</span>;
</code></pre>
<p><strong>Пример 3.</strong> Если у одного блока есть несколько реалиализаций, но на разных уровнях переопределения:</p>
<pre><code>common.<span class="hljs-keyword">blocks/
</span>└── <span class="hljs-keyword">block/
</span>    └── <span class="hljs-keyword">block.styl
</span>desktop.<span class="hljs-keyword">blocks/
</span>    └── <span class="hljs-keyword">block/
</span>        └── <span class="hljs-keyword">block.css
</span><span class="hljs-keyword">bundle
</span>└── <span class="hljs-keyword">bundle.css</span>
</code></pre><p>В сборку попадут оба файла:</p>
<pre><code class="lang-css">@<span class="hljs-keyword">import</span> <span class="hljs-string">"../common.blocks/block/block.styl"</span>;
@<span class="hljs-keyword">import</span> <span class="hljs-string">"../desktop.blocks/block/block.css"</span>;
</code></pre>
<h3 class="article__heading article__heading_3" id="Добавление-вендорных-префиксов-1"><a href="#Добавление-вендорных-префиксов-1" class="article__heading-anchor"></a>Добавление вендорных префиксов</h3><p>Технология <code>stylus</code> поддерживает <a href="https://github.com/postcss/autoprefixer">Autoprefixer</a>.</p>
<p>Для автоматического добавления вендорных префиксов в процессе сборки используйте опцию <a href="/toolbox/enb/enb-stylus/api#autoprefixer">autoprefixer</a>.</p>
<h3 class="article__heading article__heading_3" id="Минимизация-css-кода-1"><a href="#Минимизация-css-кода-1" class="article__heading-anchor"></a>Минимизация CSS-кода</h3><p>Для минимизации CSS-кода используется <a href="https://github.com/hail2u/node-csswring">csswring</a>.</p>
<p>Включить минимизацию можно с помощью опции <a href="/toolbox/enb/enb-stylus/api#compress">compress</a>.</p>
<h3 class="article__heading article__heading_3" id="Сборка-отдельного-бандла-для-ie-1"><a href="#Сборка-отдельного-бандла-для-ie-1" class="article__heading-anchor"></a>Сборка отдельного бандла для IE</h3><p>Если в проекте есть стили, которые должны примениться только для IE, то их помещают в отдельный файл со специальным расширением <code>.ie*.styl</code>:</p>
<ul>
<li><code>.ie.styl</code> — стили для любого IE, ниже 9й версии.</li>
<li><code>.ie6.styl</code> — стили для IE 6.</li>
<li><code>.ie7.styl</code> — стили для IE 7.</li>
<li><code>.ie8.styl</code> — стили для IE 8.</li>
<li><code>.ie9.styl</code> — стили для IE 9.</li>
</ul>
<p>Чтобы собрать отдельный бандл для IE нужно:</p>
<p><strong>1.</strong> В папке блока создать один или несколько файлов c расширением <code>.ie*.styl</code>:</p>
<pre><code>blocks/
└── block/
    ├── block<span class="hljs-selector-class">.styl</span>
    ├── block<span class="hljs-selector-class">.ie</span><span class="hljs-selector-class">.styl</span>
    └── block<span class="hljs-selector-class">.ie6</span><span class="hljs-selector-class">.styl</span>
</code></pre><p><strong>2.</strong> Добавить еще технологию <code>StylusTech</code>:</p>
<pre><code class="lang-js">node.addTechs([
   [stylusTech], <span class="hljs-comment">// для основного CSS</span>
   [stylusTech]  <span class="hljs-comment">// для IE</span>
]);
</code></pre>
<p><strong>3.</strong> Добавить новую цель сборки для IE файла — <code>?.ie6.css</code>:</p>
<pre><code class="lang-js">node.addTechs([
    [stylusTech],
    [stylusTech, { target: <span class="hljs-string">'?.ie6.css'</span> }]  <span class="hljs-comment">// IE 6</span>
]);

node.addTargets([<span class="hljs-string">'?.css'</span>, <span class="hljs-string">'?.ie6.css'</span>]);
</code></pre>
<p><strong>4.</strong> В БЭМ проектах принято подключать стили с помощью <a href="https://ru.wikipedia.org/wiki/Условный_комментарий">условных комментариев</a>.</p>
<p><strong>Пример</strong></p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>/&gt;</span>
        <span class="hljs-comment">&lt;!--[if gt IE 9]&gt;&lt;!--&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"index.css"</span>/&gt;</span>
        <span class="hljs-comment">&lt;!--&lt;![endif]--&gt;</span>
        <span class="hljs-comment">&lt;!--[if lte IE 9]&gt;
            &lt;link rel="stylesheet" href="index.ie.css"/&gt;
        &lt;![endif]--&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<p>Важно, чтобы файл, подключаемый для IE, содержал стили не только специфичные для него, но и общие для всей страницы.</p>
<p>Чтобы собрать такой файл, нужно расширить список суффиксов с помощью опции <a href="/toolbox/enb/enb-stylus/api#sourcesuffixes">sourceSuffixed</a>.</p>
<pre><code class="lang-js">node.addTechs([
    [stylusTech],
    [stylusTech, {
        target: <span class="hljs-string">'?.ie6.css'</span>,
        sourceSuffixes: [
            <span class="hljs-string">'styl'</span>, <span class="hljs-string">'css'</span>,          <span class="hljs-comment">// Общие стили</span>
            <span class="hljs-string">'ie.styl'</span>, <span class="hljs-string">'ie.css'</span>,    <span class="hljs-comment">// Стили для IE &lt; 9</span>
            <span class="hljs-string">'ie6.styl'</span>, <span class="hljs-string">'ie6.css'</span>   <span class="hljs-comment">// Стили для IE 6</span>
        ]
    }]
]);
node.addTargets([<span class="hljs-string">'?.css'</span>, <span class="hljs-string">'?.ie.css'</span>]);
</code></pre>
<p>В итоге получаем следующий конфигурационный файл <code>.enb/make.js</code>:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> stylusTech = <span class="hljs-built_in">require</span>(<span class="hljs-string">'enb-stylus/techs/stylus'</span>),
    FileProvideTech = <span class="hljs-built_in">require</span>(<span class="hljs-string">'enb/techs/file-provider'</span>),
    bemTechs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'enb-bem-techs'</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config</span>) </span>{
    config.node(<span class="hljs-string">'bundle'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>) </span>{
        <span class="hljs-comment">// получаем список файлов (FileList)</span>
        node.addTechs([
            [FileProvideTech, { target: <span class="hljs-string">'?.bemdecl.js'</span> }],
            [bemTechs.levels, { levels: [<span class="hljs-string">'blocks'</span>] }],
            bemTechs.deps,
            bemTechs.files
        ]);

        <span class="hljs-comment">// Собираем CSS-файлы</span>
        node.addTechs([
            [stylusTech],
            [stylusTech, {
                target: <span class="hljs-string">'?.ie6.css'</span>,
                sourceSuffixes: [
                    <span class="hljs-string">'styl'</span>, <span class="hljs-string">'css'</span>,          <span class="hljs-comment">// Общие стили</span>
                    <span class="hljs-string">'ie.styl'</span>, <span class="hljs-string">'ie.css'</span>,    <span class="hljs-comment">// Стили для IE &lt; 9</span>
                    <span class="hljs-string">'ie6.styl'</span>, <span class="hljs-string">'ie6.css'</span>   <span class="hljs-comment">// Стили для IE 6</span>
                ]
            }]
        ]);
        node.addTargets([<span class="hljs-string">'?.css'</span>, <span class="hljs-string">'?.ie6.css'</span>]);
    });
};
</code></pre>
<h2 class="article__heading article__heading_2" id="Лицензия-5"><a href="#Лицензия-5" class="article__heading-anchor"></a>Лицензия</h2><p>© 2014 YANDEX LLC. Код лицензирован <a href="LICENSE.txt">Mozilla Public License 2.0</a>.</p>
</div><ul class="article-rewind"><li class="article-rewind__prev"><a class="article-rewind__prev-link" href="/bem.info/ru/toolbox/enb/enb-css/changelog/">Изменения</a></li> <li class="article-rewind__next"><a class="article-rewind__next-link" href="/bem.info/ru/toolbox/enb/enb-stylus/api/">API</a></li></ul><div class="article-amendments">Если вы заметили ошибку или хотите чем-то дополнить статью, вы всегда можете или написать нам об этом на <a class="article-amendments__issue" href="https://github.com/enb/enb-stylus/issues/new">Гитхабе</a>, или поправить статью с помощью <a class="article-amendments__edit" href="http://prose.io/#enb/enb-stylus/blob/master/README.md">prose.io.</a></div><div class="social-likes"><a class="social-likes__text">Поделиться c миром: </a><a class="social-likes__service social-likes__service_type_facebook" href="https://www.facebook.com/sharer.php?s=100&amp;url=https%3A%2F%2Fru.bem.info%2Ftoolbox%2Fenb%2Fenb-stylus%2F&amp;title=enb-stylus&amp;image=">Facebook</a> <a class="social-likes__service social-likes__service_type_vk" href="http://vk.com/share.php?&amp;url=https%3A%2F%2Fru.bem.info%2Ftoolbox%2Fenb%2Fenb-stylus%2F&amp;title=enb-stylus&amp;image=">VKontakte</a> <a class="social-likes__service social-likes__service_type_twitter" href="https://twitter.com/share?&amp;url=https%3A%2F%2Fru.bem.info%2Ftoolbox%2Fenb%2Fenb-stylus%2F&amp;title=enb-stylus&amp;image=">Twitter</a></div></div><footer class="footer page-bg"><div class="legos legos_inverted"><div class="legos__lego legos__lego_height_3"></div><div class="legos__lego legos__lego_width_3"></div><div class="legos__lego"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_2"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_2"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_3"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_3"></div><div class="legos__lego legos__lego_width_3"></div><div class="legos__lego legos__lego_height_2"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_3"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_3"></div><div class="legos__lego legos__lego_height_2"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_3"></div><div class="legos__lego legos__lego_height_3"></div><div class="legos__lego"></div><div class="legos__lego legos__lego_height_3"></div><div class="legos__lego legos__lego_height_2"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_3"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_2"></div><div class="legos__lego legos__lego_width_3"></div><div class="legos__lego legos__lego_width_2"></div><div class="legos__lego legos__lego_width_3"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_2"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_3"></div><div class="legos__lego legos__lego_height_3"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_3"></div><div class="legos__lego legos__lego_width_2 legos__lego_height_2"></div><div class="legos__lego legos__lego_width_3 legos__lego_height_2"></div></div><div class="footer__layout"><ul class="footer__community"><li class="footer__channel"><a class="footer__channel-link" href="https://web-standards.slack.com/messages/bem/">Slack</a></li><li class="footer__channel"><a class="footer__channel-link" href="https://telegram.me/bem_ru">Telegram</a></li><li class="footer__channel"><a class="footer__channel-link" href="https://www.facebook.com/groups/bem.info/">Facebook</a></li><li class="footer__channel"><a class="footer__channel-link" href="https://twitter.com/bem_ru/">Twitter</a></li></ul></div></footer><script>(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter16972024 = new Ya.Metrika({"id":"16972024","webvisor":true,"clickmap":true,"trackLinks":true,"accurateTrackBounce":true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/16972024" style="position:absolute; left:-9999px;"/></div></noscript><script src="/bem.info/ru/toolbox.ru.min.js"></script></body></html>